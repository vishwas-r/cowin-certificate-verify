{"ast":null,"code":"/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n\n/* global Node, XMLSerializer */\n'use strict';\n\nvar _classCallCheck = require(\"D:/My Works/Git/cowin-verify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/My Works/Git/cowin-verify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _require = require('./constants'),\n    RDF_LANGSTRING = _require.RDF_LANGSTRING,\n    RDF_PLAIN_LITERAL = _require.RDF_PLAIN_LITERAL,\n    RDF_OBJECT = _require.RDF_OBJECT,\n    RDF_XML_LITERAL = _require.RDF_XML_LITERAL,\n    XSD_STRING = _require.XSD_STRING;\n\nvar _Node;\n\nif (typeof Node !== 'undefined') {\n  _Node = Node;\n} else {\n  _Node = {\n    ELEMENT_NODE: 1,\n    ATTRIBUTE_NODE: 2,\n    TEXT_NODE: 3,\n    CDATA_SECTION_NODE: 4,\n    ENTITY_REFERENCE_NODE: 5,\n    ENTITY_NODE: 6,\n    PROCESSING_INSTRUCTION_NODE: 7,\n    COMMENT_NODE: 8,\n    DOCUMENT_NODE: 9,\n    DOCUMENT_TYPE_NODE: 10,\n    DOCUMENT_FRAGMENT_NODE: 11,\n    NOTATION_NODE: 12\n  };\n}\n\nmodule.exports = /*#__PURE__*/function () {\n  function Rdfa() {\n    _classCallCheck(this, Rdfa);\n  }\n\n  _createClass(Rdfa, [{\n    key: \"parse\",\n    value:\n    /**\n     * Parses the RDF dataset found via the data object from the RDFa API.\n     *\n     * @param data the RDFa API data object.\n     *\n     * @return the RDF dataset.\n     */\n    function parse(data) {\n      var dataset = {};\n      dataset['@default'] = [];\n      var subjects = data.getSubjects();\n\n      for (var si = 0; si < subjects.length; ++si) {\n        var subject = subjects[si];\n\n        if (subject === null) {\n          continue;\n        } // get all related triples\n\n\n        var triples = data.getSubjectTriples(subject);\n\n        if (triples === null) {\n          continue;\n        }\n\n        var predicates = triples.predicates;\n\n        for (var predicate in predicates) {\n          // iterate over objects\n          var objects = predicates[predicate].objects;\n\n          for (var oi = 0; oi < objects.length; ++oi) {\n            var object = objects[oi]; // create RDF triple\n\n            var triple = {}; // add subject\n\n            if (subject.indexOf('_:') === 0) {\n              triple.subject = {\n                type: 'blank node',\n                value: subject\n              };\n            } else {\n              triple.subject = {\n                type: 'IRI',\n                value: subject\n              };\n            } // add predicate\n\n\n            if (predicate.indexOf('_:') === 0) {\n              triple.predicate = {\n                type: 'blank node',\n                value: predicate\n              };\n            } else {\n              triple.predicate = {\n                type: 'IRI',\n                value: predicate\n              };\n            } // serialize XML literal\n\n\n            var value = object.value;\n\n            if (object.type === RDF_XML_LITERAL) {\n              // initialize XMLSerializer\n              var _XMLSerializer = getXMLSerializerClass();\n\n              var serializer = new _XMLSerializer();\n              value = '';\n\n              for (var x = 0; x < object.value.length; x++) {\n                if (object.value[x].nodeType === _Node.ELEMENT_NODE) {\n                  value += serializer.serializeToString(object.value[x]);\n                } else if (object.value[x].nodeType === _Node.TEXT_NODE) {\n                  value += object.value[x].nodeValue;\n                }\n              }\n            } // add object\n\n\n            triple.object = {}; // object is an IRI\n\n            if (object.type === RDF_OBJECT) {\n              if (object.value.indexOf('_:') === 0) {\n                triple.object.type = 'blank node';\n              } else {\n                triple.object.type = 'IRI';\n              }\n            } else {\n              // object is a literal\n              triple.object.type = 'literal';\n\n              if (object.type === RDF_PLAIN_LITERAL) {\n                if (object.language) {\n                  triple.object.datatype = RDF_LANGSTRING;\n                  triple.object.language = object.language;\n                } else {\n                  triple.object.datatype = XSD_STRING;\n                }\n              } else {\n                triple.object.datatype = object.type;\n              }\n            }\n\n            triple.object.value = value; // add triple to dataset in default graph\n\n            dataset['@default'].push(triple);\n          }\n        }\n      }\n\n      return dataset;\n    }\n  }]);\n\n  return Rdfa;\n}();\n\nfunction getXMLSerializerClass() {\n  if (typeof XMLSerializer === 'undefined') {\n    return require('xmldom').XMLSerializer;\n  }\n\n  return XMLSerializer;\n}","map":{"version":3,"sources":["D:/My Works/Git/cowin-verify/node_modules/jsonld/lib/Rdfa.js"],"names":["require","RDF_LANGSTRING","RDF_PLAIN_LITERAL","RDF_OBJECT","RDF_XML_LITERAL","XSD_STRING","_Node","Node","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","module","exports","data","dataset","subjects","getSubjects","si","length","subject","triples","getSubjectTriples","predicates","predicate","objects","oi","object","triple","indexOf","type","value","XMLSerializer","getXMLSerializerClass","serializer","x","nodeType","serializeToString","nodeValue","language","datatype","push"],"mappings":"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","sourcesContent":["/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n/* global Node, XMLSerializer */\n'use strict';\n\nconst {\n  RDF_LANGSTRING,\n  RDF_PLAIN_LITERAL,\n  RDF_OBJECT,\n  RDF_XML_LITERAL,\n  XSD_STRING,\n} = require('./constants');\n\nlet _Node;\nif(typeof Node !== 'undefined') {\n  _Node = Node;\n} else {\n  _Node = {\n    ELEMENT_NODE: 1,\n    ATTRIBUTE_NODE: 2,\n    TEXT_NODE: 3,\n    CDATA_SECTION_NODE: 4,\n    ENTITY_REFERENCE_NODE: 5,\n    ENTITY_NODE: 6,\n    PROCESSING_INSTRUCTION_NODE: 7,\n    COMMENT_NODE: 8,\n    DOCUMENT_NODE: 9,\n    DOCUMENT_TYPE_NODE: 10,\n    DOCUMENT_FRAGMENT_NODE: 11,\n    NOTATION_NODE: 12\n  };\n}\n\nmodule.exports = class Rdfa {\n  /**\n   * Parses the RDF dataset found via the data object from the RDFa API.\n   *\n   * @param data the RDFa API data object.\n   *\n   * @return the RDF dataset.\n   */\n  parse(data) {\n    const dataset = {};\n    dataset['@default'] = [];\n\n    const subjects = data.getSubjects();\n    for(let si = 0; si < subjects.length; ++si) {\n      const subject = subjects[si];\n      if(subject === null) {\n        continue;\n      }\n\n      // get all related triples\n      const triples = data.getSubjectTriples(subject);\n      if(triples === null) {\n        continue;\n      }\n      const predicates = triples.predicates;\n      for(const predicate in predicates) {\n        // iterate over objects\n        const objects = predicates[predicate].objects;\n        for(let oi = 0; oi < objects.length; ++oi) {\n          const object = objects[oi];\n\n          // create RDF triple\n          const triple = {};\n\n          // add subject\n          if(subject.indexOf('_:') === 0) {\n            triple.subject = {type: 'blank node', value: subject};\n          } else {\n            triple.subject = {type: 'IRI', value: subject};\n          }\n\n          // add predicate\n          if(predicate.indexOf('_:') === 0) {\n            triple.predicate = {type: 'blank node', value: predicate};\n          } else {\n            triple.predicate = {type: 'IRI', value: predicate};\n          }\n\n          // serialize XML literal\n          let value = object.value;\n          if(object.type === RDF_XML_LITERAL) {\n            // initialize XMLSerializer\n            const XMLSerializer = getXMLSerializerClass();\n            const serializer = new XMLSerializer();\n            value = '';\n            for(let x = 0; x < object.value.length; x++) {\n              if(object.value[x].nodeType === _Node.ELEMENT_NODE) {\n                value += serializer.serializeToString(object.value[x]);\n              } else if(object.value[x].nodeType === _Node.TEXT_NODE) {\n                value += object.value[x].nodeValue;\n              }\n            }\n          }\n\n          // add object\n          triple.object = {};\n\n          // object is an IRI\n          if(object.type === RDF_OBJECT) {\n            if(object.value.indexOf('_:') === 0) {\n              triple.object.type = 'blank node';\n            } else {\n              triple.object.type = 'IRI';\n            }\n          } else {\n            // object is a literal\n            triple.object.type = 'literal';\n            if(object.type === RDF_PLAIN_LITERAL) {\n              if(object.language) {\n                triple.object.datatype = RDF_LANGSTRING;\n                triple.object.language = object.language;\n              } else {\n                triple.object.datatype = XSD_STRING;\n              }\n            } else {\n              triple.object.datatype = object.type;\n            }\n          }\n          triple.object.value = value;\n\n          // add triple to dataset in default graph\n          dataset['@default'].push(triple);\n        }\n      }\n    }\n\n    return dataset;\n  }\n};\n\nfunction getXMLSerializerClass() {\n  if(typeof XMLSerializer === 'undefined') {\n    return require('xmldom').XMLSerializer;\n  }\n  return XMLSerializer;\n}\n"]},"metadata":{},"sourceType":"script"}